---
import '../../styles/global.css';

import img1 from '../../assets/amazonia.webp';
import img2 from '../../assets/ekaa.webp';
import img3 from '../../assets/gaico.webp';
import img4 from '../../assets/jacobs.webp';
import img5 from '../../assets/mills.webp';
import img6 from '../../assets/puran.webp';
import img7 from '../../assets/silvies.webp';
import img8 from '../../assets/tamanna.webp';
import img9 from '../../assets/tau.webp';
import img10 from '../../assets/windson.webp';

const brandImages = [img1, img2, img3, img4, img5, img6, img7, img8, img9, img10];
---
<section class="bg-[#333333] text-white text-center py-10 md:py-20 px-4">
    <div class="max-w-7xl mx-auto">
  <h2 class="text-2xl md:text-4xl font-bold mb-10">Trusted by Global Brands</h2>

  <div class="overflow-hidden relative">
    <div
      id="carousel-track"
      class="flex gap-[6px] transition-transform duration-700 ease-in-out w-fit"
      style="will-change: transform;"
    >
      {brandImages.concat(brandImages).map((img, i) => (
        <div class="flex-shrink-0 w-full sm:w-1/2 md:w-1/5">
          <img src={img.src} alt={`Brand ${i + 1}`} class="h-16 mx-auto object-contain" />
        </div>
      ))}
    </div>
  </div></div>
</section>

<script type="module">
  const track = document.getElementById("carousel-track");
  const slideItems = track.querySelectorAll("div");
  let currentIndex = 0;
  const totalSlides = slideItems.length / 2;

  const getSlideWidth = () => slideItems[0].offsetWidth + 6; // 6px gap

  const scroll = () => {
    currentIndex++;
    if (currentIndex >= totalSlides) {
      track.style.transition = "none";
      track.style.transform = `translateX(0px)`;
      currentIndex = 1;
      requestAnimationFrame(() => {
        requestAnimationFrame(() => {
          track.style.transition = "transform 0.7s ease-in-out";
          track.style.transform = `translateX(-${getSlideWidth() * currentIndex}px)`;
        });
      });
    } else {
      track.style.transition = "transform 0.7s ease-in-out";
      track.style.transform = `translateX(-${getSlideWidth() * currentIndex}px)`;
    }
  };

  let interval = setInterval(scroll, 2500);

  window.addEventListener("resize", () => {
    track.style.transition = "none";
    track.style.transform = `translateX(-${getSlideWidth() * currentIndex}px)`;
  });
</script>
